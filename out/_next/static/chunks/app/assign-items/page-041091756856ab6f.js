(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[865],{4232:function(e,t,s){Promise.resolve().then(s.bind(s,795))},795:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var n=s(7437),a=s(2265),r=s(6463);function o(){let[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[l,i]=(0,a.useState)(""),[d,c]=(0,a.useState)(0),[m,g]=(0,a.useState)(0),x=(0,r.useRouter)();(0,a.useEffect)(()=>{let e=localStorage.getItem("receiptItems"),s=localStorage.getItem("receiptTip"),n=localStorage.getItem("receiptTax");if(e)try{let s=JSON.parse(e).map(e=>({...e,assignedTo:[]}));t(s)}catch(e){console.error("Failed to parse receipt items:",e)}s&&c(parseFloat(s)||0),n&&g(parseFloat(n)||0)},[]);let u=()=>{l.trim()&&(o([...s,{id:"person-".concat(Date.now()),name:l.trim()}]),i(""))},h=n=>{o(s.filter(e=>e.id!==n)),t(e.map(e=>{var t;return{...e,assignedTo:(null===(t=e.assignedTo)||void 0===t?void 0:t.filter(e=>e!==n))||[]}}))},p=(s,n)=>{t(e.map(e=>{if(e.id===s){let t=e.assignedTo||[],s=t.includes(n);return{...e,assignedTo:s?t.filter(e=>e!==n):[...t,n]}}return e}))},b=e=>{let t=s.find(t=>t.id===e);return t?t.name:"Unknown"},f=e.reduce((e,t)=>e+t.price,0);return(0,n.jsxs)("main",{className:"p-4 max-w-2xl mx-auto",children:[(0,n.jsx)("button",{onClick:()=>x.back(),className:"mb-4 text-orange-600 hover:text-orange-800 hover:underline font-medium",children:"← Back"}),(0,n.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Assign Items"}),(0,n.jsx)("p",{className:"text-gray-500 mb-6",children:"Type all the names and assign items"}),(0,n.jsxs)("div",{className:"mb-6 p-6 border-2 border-orange-200 rounded-xl bg-gradient-to-br from-orange-50 to-indigo-50 shadow-sm",children:[(0,n.jsx)("h3",{className:"font-bold mb-4 text-orange-800 text-lg",children:"Add People"}),(0,n.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,n.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"Enter person's name",className:"flex-1 p-3 border-2 border-orange-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 bg-white shadow-sm",onKeyPress:e=>"Enter"===e.key&&u()}),(0,n.jsx)("button",{onClick:u,className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-200 shadow-md hover:shadow-lg font-medium",children:"+ Add Person"})]}),(0,n.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,n.jsxs)("div",{className:"flex justify-between items-center p-3 bg-white border-2 border-orange-100 rounded-lg shadow-sm",children:[(0,n.jsx)("span",{className:"font-medium text-black",children:e.name}),(0,n.jsx)("button",{onClick:()=>h(e.id),className:"px-3 py-1 text-orange-600 hover:bg-orange-50 rounded-md transition-colors font-medium",children:"Delete"})]},e.id))})]}),s.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("hr",{className:"mb-6 border-purple-200"}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsx)("h3",{className:"font-bold text-lg text-purple-800",children:"Assign Items"}),(0,n.jsx)("button",{onClick:()=>{if(0===s.length){alert("Please add at least one person first");return}t(e.map(e=>({...e,assignedTo:s.map(e=>e.id)})))},className:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg hover:from-indigo-600 hover:to-purple-600 transition-all duration-200 shadow-md hover:shadow-lg font-medium",children:"Split Evenly"})]}),(0,n.jsx)("div",{className:"space-y-4",children:e.map(e=>{var t;return(0,n.jsxs)("div",{className:"border-2 border-purple-200 rounded-xl p-5 bg-gradient-to-br from-white to-purple-25 shadow-md hover:shadow-lg transition-shadow duration-200",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-bold text-black text-lg",children:e.name}),(0,n.jsxs)("p",{className:"text-black font-semibold text-lg",children:["$",e.price.toFixed(2)]})]}),(0,n.jsxs)("div",{className:"text-sm text-orange-600 bg-orange-100 px-3 py-1 rounded-full font-medium",children:[(null===(t=e.assignedTo)||void 0===t?void 0:t.length)||0," / ",s.length," people"]})]}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-3",children:s.map(t=>{var s;return(0,n.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer p-2 rounded-lg hover:bg-orange-50 transition-colors",children:[(0,n.jsx)("input",{type:"checkbox",checked:(null===(s=e.assignedTo)||void 0===s?void 0:s.includes(t.id))||!1,onChange:()=>p(e.id,t.id),className:"w-4 h-4 rounded text-orange-600 focus:ring-orange-500 focus:ring-2"}),(0,n.jsx)("span",{className:"text-sm font-medium text-black",children:t.name})]},t.id)})}),e.assignedTo&&e.assignedTo.length>0&&(0,n.jsxs)("div",{className:"mt-3 text-sm text-orange-700 bg-orange-50 p-2 rounded-lg",children:[(0,n.jsx)("span",{className:"font-medium",children:"Assigned to:"})," ",e.assignedTo.map(e=>b(e)).join(", ")]})]},e.id)})})]})]}),s.length>0&&e.length>0&&(0,n.jsxs)("div",{className:"mb-6 p-6 bg-gradient-to-br from-orange-50 to-indigo-50 rounded-xl border-2 border-orange-200 shadow-sm",children:[(0,n.jsx)("h3",{className:"font-bold mb-3 text-orange-800 text-lg",children:"Summary"}),(0,n.jsxs)("div",{className:"text-sm text-black space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-black",children:"Subtotal:"}),(0,n.jsxs)("span",{className:"font-semibold text-black",children:["$",f.toFixed(2)]})]}),d>0&&(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-black",children:"Tip:"}),(0,n.jsxs)("span",{className:"font-semibold text-black",children:["$",d.toFixed(2)]})]}),m>0&&(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-black",children:"Tax:"}),(0,n.jsxs)("span",{className:"font-semibold text-black",children:["$",m.toFixed(2)]})]}),(0,n.jsx)("hr",{className:"border-orange-200"}),(0,n.jsxs)("div",{className:"flex justify-between font-bold text-lg text-black",children:[(0,n.jsx)("span",{children:"Total:"}),(0,n.jsxs)("span",{children:["$",(f+d+m).toFixed(2)]})]}),(0,n.jsxs)("div",{className:"mt-3 text-center text-orange-600 font-medium",children:[s.length," People • ",e.length," Items"]})]})]}),(0,n.jsx)("button",{onClick:()=>{if(0===s.length){alert("Please add at least one person");return}(!e.some(e=>!e.assignedTo||0===e.assignedTo.length)||confirm("Some items are not assigned to anyone. Continue anyway?"))&&(localStorage.setItem("finalItems",JSON.stringify(e)),localStorage.setItem("finalPeople",JSON.stringify(s)),localStorage.setItem("finalTip",d.toString()),localStorage.setItem("finalTax",m.toString()),x.push("/split-summary"))},disabled:0===s.length,className:"w-full bg-gradient-to-r from-orange-600 to-indigo-600 text-white px-6 py-4 rounded-xl shadow-lg hover:from-orange-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-200 font-bold text-lg hover:shadow-xl",children:"Continue to Summary"}),0===s.length&&(0,n.jsx)("p",{className:"text-center text-orange-600 text-sm mt-3 font-medium",children:"Add at least one person to continue"})]})}},6463:function(e,t,s){"use strict";var n=s(1169);s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=4232)}),_N_E=e.O()}]);