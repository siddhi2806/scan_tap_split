(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[489],{2070:function(e,t,s){Promise.resolve().then(s.bind(s,6135))},6135:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(7437),l=s(2265),n=s(6463);function i(){let[e,t]=(0,l.useState)([]),[s,i]=(0,l.useState)(0),r=(0,n.useRouter)();(0,l.useEffect)(()=>{let e=localStorage.getItem("finalItems"),s=localStorage.getItem("finalPeople"),a=localStorage.getItem("finalTip"),l=localStorage.getItem("finalTax");if(e&&s)try{let n=JSON.parse(e),r=JSON.parse(s),o=parseFloat(a||"0"),c=parseFloat(l||"0"),d=n.reduce((e,t)=>e+t.price,0);i(d+o+c);let x=r.map(e=>{let t=[],s=0;n.forEach(a=>{if(a.assignedTo&&a.assignedTo.includes(e.id)){let e=a.assignedTo.length,l=a.price/e;t.push({item:a,shareAmount:l}),s+=l}});let a=d>0?s/d:0,l=o*a,i=c*a;return{person:e,items:t,tipShare:l,taxShare:i,total:s+l+i}});t(x)}catch(e){console.error("Failed to parse final data:",e)}},[]);let o=async()=>{let e=d();if(navigator.share)try{await navigator.share({title:"Bill Split Summary",text:e})}catch(t){console.log("Error sharing:",t),c(e)}else c(e)},c=e=>{navigator.clipboard.writeText(e).then(()=>{alert("Bill summary copied to clipboard!")}).catch(()=>{let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),alert("Bill summary copied to clipboard!")})},d=()=>{let t="\uD83D\uDCB0 Bill Split Summary\n\n";return e.forEach(e=>{t+="\uD83D\uDC64 ".concat(e.person.name,": $").concat(e.total.toFixed(2),"\n"),e.items.length>0&&(t+="   Items:\n",e.items.forEach(e=>{let{item:s,shareAmount:a}=e,l=s.assignedTo&&s.assignedTo.length>1?" (split ".concat(s.assignedTo.length," ways)"):"";t+="   • ".concat(s.name,": $").concat(a.toFixed(2)).concat(l,"\n")})),e.tipShare>0&&(t+="   • Tip: $".concat(e.tipShare.toFixed(2),"\n")),e.taxShare>0&&(t+="   • Tax: $".concat(e.taxShare.toFixed(2),"\n")),t+="\n"}),t+="\uD83D\uDCCA Total Bill: $".concat(s.toFixed(2))+"\n\n\uD83E\uDD16 Generated by Bill Splitter App"};return(0,a.jsxs)("main",{className:"p-4 max-w-2xl mx-auto",children:[(0,a.jsx)("button",{onClick:()=>r.back(),className:"mb-4 text-orange-500 hover:underline",children:"← Back"}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Split Summary"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"This is how you should split this bill:"}),(0,a.jsx)("div",{className:"space-y-4 mb-6",children:e.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-white",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:e.person.name}),(0,a.jsxs)("div",{className:"text-xl font-bold text-orange-600",children:["$",e.total.toFixed(2)]})]}),e.items.length>0&&(0,a.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,a.jsx)("div",{className:"font-medium",children:"Items:"}),e.items.map((e,t)=>{let{item:s,shareAmount:l}=e;return(0,a.jsxs)("div",{className:"flex justify-between pl-4",children:[(0,a.jsxs)("span",{children:[s.name,s.assignedTo&&s.assignedTo.length>1&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[" ","(split ",s.assignedTo.length," ways)"]})]}),(0,a.jsxs)("span",{children:["$",l.toFixed(2)]})]},t)}),e.tipShare>0&&(0,a.jsxs)("div",{className:"flex justify-between pl-4",children:[(0,a.jsx)("span",{children:"Tip share"}),(0,a.jsxs)("span",{children:["$",e.tipShare.toFixed(2)]})]}),e.taxShare>0&&(0,a.jsxs)("div",{className:"flex justify-between pl-4",children:[(0,a.jsx)("span",{children:"Tax share"}),(0,a.jsxs)("span",{children:["$",e.taxShare.toFixed(2)]})]})]})]},e.person.id))}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Total Bill:"}),(0,a.jsxs)("span",{className:"text-xl font-bold",children:["$",s.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Split among ",e.length," people"]})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{onClick:o,className:"flex-1 bg-orange-500 text-white px-6 py-3 rounded-lg shadow hover:bg-orange-600 transition-colors",children:"\uD83D\uDCF1 Share"}),(0,a.jsx)("button",{onClick:()=>r.push("/"),className:"flex-1 bg-white border border-gray-300 text-gray-700 px-6 py-3 rounded-lg shadow hover:bg-gray-50 transition-colors",children:"\uD83C\uDFE0 Back Home"})]}),(0,a.jsx)("div",{className:"mt-4 text-center text-xs text-gray-500",children:"Tip: Use the Share button to send this summary via text, email, or social media"})]})}},6463:function(e,t,s){"use strict";var a=s(1169);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=2070)}),_N_E=e.O()}]);